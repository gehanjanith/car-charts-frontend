<div class="hello-user">
  <h2>Hello, {{ username }}</h2>
</div>
<h1>User Dashboard</h1>

<div [ngClass]="{'collapsed': isCollapsed}" class="list-box">
    <button (click)="toggleSidebar()" class="hamburger-btn">&#9776;</button>
    <ul>
      <li class="list-item"><a routerLink="/create-post" class="list-item-link">Create a Post</a></li>
      <li class="list-item"><a routerLink="/inbox" class="list-item-link">Check Inbox</a></li>
      <li class="list-item"><a routerLink="/market-reports" class="list-item-link">Market Reports</a></li>

  
    </ul>
  </div>


<div class="model-page-container">

<h1>Model Information</h1>

<form class="search-form">

    <div class="form-group">
     <label for="make">Make:</label>
     <select id="make" [(ngModel)]="selectedMake" (change)="onMakeSelected($event)" required name="make">
       <option *ngFor="let make of makes" [value]="make">{{ make }}</option>
     </select>
   </div>
   
   <div class="form-group">
     <label for="model">Model:</label>
     <select id="model" [(ngModel)]="selectedModel"  [disabled]="!selectedMake" (change)="onModelChange($event)" required name="model">
       <option *ngFor="let model of models" [value]="model">{{ model }}</option>
     </select>
   </div>
   
   <div class="form-group">
     <label for="Year">Year:</label>
     <select id="Year" [(ngModel)]="selectedYear" required name="Year">
       <option *ngFor="let year of YearOptions" [value]="year">{{ year }}</option>
     </select>
   </div>
   
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />

   <div class="form-group">
     <button type="submit" (click)="searchVehicle()"><i class="fas fa-search" title="Search"></i></button>
   </div>
   
 </form>


 <div class = "vehicle-info-container">
  <div *ngIf="vehiclePrice">
    <h3>Vehicle Price Information of the {{ selectedMake }} {{ selectedModel }} On {{ selectedYear }} Model Year:</h3>
    <p><strong>Average Market Price:</strong>  {{ vehiclePrice.avgPrice | currency:'LKR ' }}</p>
    <p><strong>Maximum Price:</strong>  {{ vehiclePrice.maxPrice | currency:'LKR ' }}</p>
    <p><strong>Minimum Price: </strong> {{ vehiclePrice.minPrice | currency:'LKR ' }}</p>
  </div>

  <div *ngIf="vehiclePrice" class="price-difference" [ngClass]="{ 'positive': vehiclePrice.differencePercentage > 0, 'negative': vehiclePrice.differencePercentage < 0 }">
    <p>Last Price: {{ vehiclePrice.avgPrice | currency:'LKR ' }}</p>
   <!-- <p>Price Difference: {{ vehiclePrice.priceDifference }}</p> -->
    <p [ngClass]="{ 'positive': vehiclePrice.differencePercentage > 0, 'negative': vehiclePrice.differencePercentage < 0 }">Difference Percentage: {{ vehiclePrice.differencePercentage | number:'1.2-2' }}%</p>
  </div>
  
  
  

 </div>
 <div class = "chart">
  <canvas id="lineChart" width="800" height="400"></canvas>
  <div class="tooltip"></div> <!-- Tooltip container -->

 </div>

</div>


